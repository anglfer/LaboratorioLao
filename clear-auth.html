<!DOCTYPE html>
<html>

<head>
    <title>Clear Auth State</title>
</head>

<body>
    <h1>Limpiando estado de autenticación...</h1>
    <div id="result"></div>

    <script>
        // Limpiar localStorage
        localStorage.removeItem('usuario');
        console.log('LocalStorage limpiado');

        // Hacer logout en el servidor
        fetch('/api/auth/logout', {
            method: 'POST',
            credentials: 'include'
        }).then(() => {
            console.log('Logout del servidor completado');
            document.getElementById('result').innerHTML =
                '<p>Estado limpiado. <a href="/">Ir a la aplicación</a></p>';
        }).catch(error => {
            console.error('Error en logout:', error);
            document.getElementById('result').innerHTML =
                '<p>Error en logout, pero localStorage limpiado. <a href="/">Ir a la aplicación</a></p>';
        });
    </script>
</body>

</html>